<!DOCTYPE html>
<html style="margin:0;">
<head>
<meta charset="UTF-8">
<title>3D御剑</title>
<!-- <link href="../index.css" rel="stylesheet"> -->
<script type="x-shader/x-vertex" id="ParticleSystem-fragmentShader">
      uniform vec3 color;
      uniform vec3 endColor;
      uniform float opacity;
      uniform sampler2D texture;

      varying float vTime;varying vec2 vUv;
      
      void main() {
        vec4 texColor = texture2D(texture, vUv);
        vec4 startColor = vec4(color, opacity);
        vec4 endColor = vec4(endColor, 0.0);
        gl_FragColor = texColor * mix(startColor, endColor, vTime);
      }
</script>
<script type="x-shader/x-vertex" id="ParticleSystem-vertexShader">
      uniform float elapsedTime;
      uniform float numParticles;
      uniform float gravity;
      uniform vec3 up;
      
      uniform float sparkLifecycle;
      uniform float sparkDistanceScale;
      uniform float sparkStartSize;
      uniform float sparkEndSize;
      
      uniform float flameMaxHeight;
      uniform float flameMinHeight;
      uniform float flamePeriod;
      uniform float windStrength;
      uniform float windFrequency;

	  attribute vec3 positionO;
      attribute vec3 direction;
      attribute float uniqueness;
      attribute float particleIndex;

      #define PI 3.141592653589793238462643383279

      varying float vTime;varying vec2 vUv;

      void main( void ) {
        // unique duration
        float duration = sparkLifecycle + sparkLifecycle * uniqueness;

        // make time loop
        float particleOffset = (particleIndex / numParticles * duration);
        float time = mod(elapsedTime + particleOffset, duration);

        // store time as 0-1 for fragment shader
        vTime = time / duration;

        // apply "gravity" to fire
        vec3 vGravity = up * gravity * pow(vTime, 2.0);

        // move in direction based on elapsed time
        float flameHeight = mix(flameMinHeight, flameMaxHeight, uniqueness); 
        vec3 vDistance = flameHeight * direction * vTime;

        // close flame at top (0.5 is fully closed)
        vDistance.xz *= cos(mix(0.0, PI * flamePeriod, vTime));

        // apply some random horizonal wind
        vec3 vWind = sin((elapsedTime + vTime * uniqueness) * windFrequency * uniqueness) * cross(up, direction) * windStrength * uniqueness * vTime;

        // add all forces to get final position for this frame
        vec3 pos = position + vDistance + vGravity + vWind;
	    pos*=mix(.1, 7., vTime);

        // Set size based on frame and distance
        vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );
        //gl_PointSize = mix(sparkStartSize, sparkEndSize, vTime);
		//		  gl_PointSize = gl_PointSize * (sparkDistanceScale / length(mvPosition.xyz));
        
        // project position on screen
        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
	    vUv=uv;
      }
</script>
<style type="text/css">
</style>
</head>
<body style="margin:0;">
<img src="../assets/pic/cursor.ico" style="width:0;position:absolute;"></img>
<img src="../assets/pic/hero1.gif" style="position:absolute;left:10px;top: 80px;"
onclick="selectEntity(0);"></img>
<div style="position: absolute;
    left: 330px;
    bottom: 74px;">

<div style="position:absolute;left:0px;top: -20px;">
<img src="../assets/pic/a.png" style="width:59px;height:59px;" id=""></img>
<div>
单位：<br>
生命直：<br>
魔法值：</div>
</div>
<div style="margin-left: 100px;" id="spell_bar">
<img src="../assets/pic/Spell_Frost_FrostBolt02.jpg" style="" onclick="castSkill();"></img>
<img src="../assets/pic/Spell_Frost_FrostNova.jpg" style="" onclick="castSkill();"></img>
<img src="../assets/pic/Spell_Empty.jpg" style="" onclick="selectEntity();"></img>
<img src="../assets/pic/Spell_Empty.jpg" style="" onclick="selectEntity();"></img>
<img src="../assets/pic/Spell_Empty.jpg" style=""></img>
<img src="../assets/pic/Spell_Empty.jpg" style=""></img>
<img src="../assets/pic/Spell_Empty.jpg" style=""></img>
<img src="../assets/pic/Spell_Empty.jpg" style=""></img>
</div>
</div>
<canvas id="mini_map" width="256" height="256" style="width:256px;height:256px;position:absolute;bottom:0;"></canvas>
<script src="../../js/KeyboardState.js"></script>
<!-- <script src="../../js/jquery.min.js" type="text/javascript"></script> -->
<script src="../../js/dat.gui.min.js" type="text/javascript"></script>
<script src="../../js/three.js" type="text/javascript"></script>
<script src="../../js/loaders/FBXLoader.js" type="text/javascript"></script>
<script src="../../js/stats.min.js" type="text/javascript"></script>
<script src="../../js/TrackballControls.js" type="text/javascript"></script>
<script src="../../js/OrbitControls.js" type="text/javascript"></script>
<script src="../../js/inflate.min.js" type="text/javascript"></script>
<script src="../../js/simplex.noise.js" type="text/javascript"></script>

<script src="Utils.js" type="text/javascript"></script>
<script src="index.js" type="text/javascript"></script>
<script src="Engine/TerrinMap.js" type="text/javascript"></script>
<script src="Engine/PathFinder.js" type="text/javascript"></script>
<script src="Engine/Camera.js" type="text/javascript"></script>
<script src="Engine/NewCamera.js" type="text/javascript"></script>
<script src="Engine/CursorCamera.js" type="text/javascript"></script>
<script src="Engine/Physics.js" type="text/javascript"></script>
<script src="Engine/Entity.js" type="text/javascript"></script>

<script src="main.js" type="text/javascript"></script>
<script src="script/Game.js" type="text/javascript"></script>
<script src="script/Player.js" type="text/javascript"></script>
<script src="script/Monster.js" type="text/javascript"></script>
<script src="script/MusicPlayer.js" type="text/javascript"></script>
<script src="script/Projectile.js" type="text/javascript"></script>
<script src="script/Trees.js" type="text/javascript"></script>
<script src="script/Effects.js" type="text/javascript"></script>
<script src="script/TopBoard.js" type="text/javascript"></script>
<script src="script/MiniMap.js" type="text/javascript"></script>
</body>
</html>